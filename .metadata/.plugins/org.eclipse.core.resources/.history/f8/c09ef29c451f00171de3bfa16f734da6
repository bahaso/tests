package bahaso.testing.androidElement;

import java.lang.reflect.Array;
import java.time.temporal.WeekFields;
import java.util.ArrayList;

import org.openqa.selenium.WebElement;

import com.gargoylesoftware.htmlunit.javascript.host.Element;

import io.appium.java_client.android.AndroidDriver;

public class EditProfile {
	AndroidDriver driver;
	
	public EditProfile(AndroidDriver driver){
		this.driver = driver;
	}
	
	public void scroll(){
		WebElement sizeScreen = driver.findElementByClassName("android.widget.FrameLayout");
		int middleX = sizeScreen.getLocation().getX() + sizeScreen.getSize().width/2;
		int bottomY = sizeScreen.getLocation().getY() + sizeScreen.getSize().height-50;
		int topY = sizeScreen.getLocation().getY()+100;
		
		driver.swipe(middleX, bottomY, middleX, bottomY-100, 2000);
		driver.swipe(middleX, 150, middleX, 200, 2000);
	}
	
	public WebElement scrollToById(String ID){
		String top = "com.bahaso:id/input_firstname";
		String bottom = "com.bahaso:id/layout_btn_simpan_edit_profile";
		ArrayList<WebElement> topElement = (ArrayList<WebElement>) driver.findElementsById(top);
		ArrayList<WebElement> bottomElement = (ArrayList<WebElement>) driver.findElementsById(bottom);
		int direction = 0;
		WebElement sizeScreen = driver.findElementByClassName("android.widget.FrameLayout");
		
		int middleX = sizeScreen.getLocation().getX() + sizeScreen.getSize().width/2;
		int bottomY = sizeScreen.getLocation().getY() + sizeScreen.getSize().height-50;
		int topY = sizeScreen.getLocation().getY()+150;
		ArrayList<WebElement> Elements;
		
		do{
			Elements.clear();
			topElement.clear();
			bottomElement.clear();
			topElement = (ArrayList<WebElement>) driver.findElementsById(top);
			bottomElement = (ArrayList<WebElement>) driver.findElementsById(bottom);
			Elements = (ArrayList<WebElement>) driver.findElementsById(ID);
			if(Elements.size()>0){
				return Elements.get(0);
			}
			if(direction==0 && bottomElement.size()==0){
				System.out.println("Scroll down");
				System.out.println(Elements.size());
				driver.swipe(middleX, bottomY, middleX, bottomY-50, 2000);
			}else if(direction==0 && bottomElement.size()>0){
				System.out.println("found bottom, scroll up");
				direction=1;
				driver.swipe(middleX, topY, middleX, topY+50, 2000);
			}else if(direction==1 && topElement.size()==0){
				System.out.println("Scroll up");
				driver.swipe(middleX, topY, middleX, topY+50, 2000);
			}else if(direction==1 && topElement.size()>0){
				System.out.println("No Found");
				break;
			}
		}while(Elements.size()==0);
		return driver.findElementById(ID);
	}
	
	public ArrayList<WebElement> searcErrorMessage(String ID){
			ArrayList<WebElement> Element = (ArrayList<WebElement>) driver.findElementsById(ID);
			return Element;
			//System.out.println(Element.size());
			//break;
//			int xStart = screen.getLocation().getX() + screen.getSize().width/2;
//			int yStart = screen.getLocation().getY() + screen.getSize().height-50;
//			driver.swipe(xStart, yStart, xStart, yStart-100, 1000);
	}
	
	//Button
	
	public WebElement getButtonSave(){
		String ID = "com.bahaso:id/layout_btn_simpan_edit_profile";
		return scrollToById(ID);
	}
	
	//Edit Text
	
	public WebElement getInputFirstname(){
		String ID = "com.bahaso:id/input_firstname";
		return scrollToById(ID);
	}
	
	public WebElement getInputLastname(){
		String ID = "com.bahaso:id/input_lastname";
		scrollToById(ID);
		return driver.findElementById(ID);
	}
	
	public WebElement getRadioButtonMale(){
		String ID = "com.bahaso:id/rb_male";
		scrollToById(ID);
		return driver.findElementById(ID);
	}
	
	public WebElement getRadioButtonFemale(){
		String ID = "com.bahaso:id/rb_female";
		scrollToById(ID);
		return driver.findElementById(ID);
	}
	
	public WebElement getInputBirthdate(){
		String ID = "com.bahaso:id/input_dob";
		scrollToById(ID);
		return driver.findElementById(ID);
	}
	
	public WebElement getInputCountry(){
		String ID = "com.bahaso:id/tv_input_country";
		scrollToById(ID);
		return driver.findElementById(ID);
	}
	
	public WebElement getInputCallingCode(){
		String ID = "com.bahaso:id/tv_calling_code";
		scrollToById(ID);
		return driver.findElementById(ID);
	}
	
	public WebElement getInputPhoneNumber(){
		String ID = "com.bahaso:id/et_phone_number";
		scrollToById(ID);
		return driver.findElementById(ID);
	}
	
	public WebElement getInputJob(){
		String ID = "com.bahaso:id/input_job";
		scrollToById(ID);
		return driver.findElementById(ID);
	}
	
	public WebElement getInputAboutMe(){
		String ID = "com.bahaso:id/input_about_me";
		scrollToById(ID);
		return driver.findElementById(ID);
	}
	
	public WebElement getMessageError(){
		String ID = "com.bahaso:id/textinput_error";
		scrollToById(ID);
		return driver.findElementById(ID);
	}
	
	public ArrayList<WebElement> getMessagesError(){
		String ID = "com.bahaso:id/textinput_error";
		scrollToById(ID);
		return (ArrayList<WebElement>) driver.findElementsById(ID);
	}
	
	
}
